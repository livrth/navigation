# 学生管理系统项目文档
## 目录

---------
##   一、功能需求报告
### 1.1课内信息管理
### 1.2课外信息管理
### 1.3课程导航
### 1.4模拟时间
### 1.5日志
---------
##   二、总体方案设计报告
### 2.1.代码结构
* 为了使得三种类型的用户能够实现各自的功能，将三类用户对应的模块进行明确地区分。
* 课内信息相关的需求以及导航的需求内容较多，同时可修改空间较大，为了便于迭代，作为单独的模块出现。
* 把所有菜单放在menu.cpp中，方便查找。
* 利用文件存储数据，相关文件操作具有可移植性。
用户对数据的修改将会作用在文件上，实现可复用性。

### 2.2.文件存储
>1老师需要读取的信息文件
* 任课教师id为y,那么在homework_set下的y_teacher文件夹中的course_collection中存有教师教授课程的目录
 >2活动相关的本地文件
 * 1.学生个人活动信息放在identity_model下的activity_course_table文件夹中,对于id为x的学生，其所有活动信息存储在该文件夹下的x_activity_table.txt中

 * 2.班级活动信息放在identity_model下的group_set文件夹中,对于id为x的班级，其所有班级活动信息存储在该文件夹下的x_group.txt中
 >3课程相关的本地文件
 * 1.对于id为x的学生，在identity_model下的x_activity_table.txt中存储有基本的课程信息，通过这个文件学生可以生产课程表

 * 2.对于id为y的课程，在course_model下的course_set文件夹下面的y_course.txt中存储有该课程的全部公共信息
 >4作业相关的本地文件
 * 1.对于学生id x,其在任课教师id为y的课程id为z的课程的第i次作业的全部信息存储在identity_model下的homework_set/y_teacher/z_course/i_times/
 x_stu文件夹中

 * 2.压缩后的作业在该文件夹下的zip.txt,码表在unzip.txt,解码后作业在hw.txt,作业分数与提交状态在info.txt中
> 5资料相关的本地文件
* 待定
>6用户信息相关的本地文件
* 1.identity_model下的admin_info.txt中存储管理员id,密码

* 2.identity_model下的stu_info.txt中存储学生id,密码,姓名,班级id

* 3.identity_model下的teacher_info.txt中存储老师id,密码,姓名
>7日志文件
* 存储在log文件夹中，对三类不同的用户各自设置了日志文件
>8数据规模
* 项目设定为有1名管理员，2位老师，10名学生，12们课程，20个活动，2个校区，每个校区20个建筑。
-------------------------------
## 三、模块设计报告
### 3.1.course_model
>数据结构说明和数据字典
* 1.struct single_course

存储一堂课的单元
* 2.struct material

存储一份电子资料的单元（包含权重信息）
* 3.struct hw

存储一份作业信息的单元（包含成绩信息）
* 4.vector<int> order_hws

以成绩为关键字进行快速排序时，存放排序结果的下标
* 5.vector<int> order_materials

以权重为关键字进行快速排序时，存放排序结果的下标
>实现的功能

 * 1.提交课程作业  

 *  2.提交课程资料                            
* 3.下载课程资料    
* 4.作业名称查询   
 *   5.作业成绩排序    
 * 6.资料名称查询   
  * 7.资料权重排序
>算法
* 以下标转换为基础的快速排序，既可以节省空间，又提高效率
>与其他模块交互
* 学生用户可以在个人主页中通过课程表选定课程或者通过搜索来创建课程类实例并进入课程界面实现课程提供的各种功能
  
### 3.2 identiy_model

#### 3.2.1 学生用户
>数据结构说明和数据字典
* 1.map<string, string> name_to_id

在找到正确的名字后通过名字找到对应的课程下标，通过下标可以读取课程文件创建课程类

* 2.map<int, pair<string, string> > time_to_place

在找到合理的时间（大于输入时间的最新上课开始时间）后必须通过时间查找到对应的地名（校区+建筑），这样学生可以实现通过时间进行导航
* 3.string my_course_table[6][12]

存储学生课程表
* 4.Node t1[1000],Node t2[1000]

分别是用来存储课程时间和活动时间的二叉搜索树
* 5.map<string, vector<single_activity> > name_to_activity

在找到正确的名字后通过名字找到对应的活动
* 6.map<int, vector<single_activity> > time_to_activity

在找到正确的时间后通过时间找到对应的活动
* 7.struct single_activity

存储活动信息的单元
* 8.weekly_sys_time

模拟时间
* 9.weekly_real_time

真实时间
* 10.map<word_to_sen>,map<word_to_par>

字符到其所属字符串的有序映射表
>算法
* 利用二叉搜索树进行数据的查找，复杂度为O(lnx)

* 利用两区间中点的距离的绝对值和两区间总长度之间的大小关系方便的检测冲突
* dijstra算法进行最短路计算
* 利用多线程以及时间差的存储，缩放实现模拟系统时钟的暂停和快进
* 将所有组成可能被搜索的名字中的字符存进内存，与用户输入进行匹配来实现模糊查询；考虑到所有条目的名字总长度很短，所以所占内存空间可以接受，而且搜索复杂度低至O(klogn)(k为搜索字符长度，n为全部字符长度)
> 实现的功能

* 1.课程名称查询  
  
 *   2.课表课程查询    
     
 *  3.课程时间查询    
    
*   4.活动名称查询    
    
 *   5.进入活动菜单（进入后可以对个人活动增删改)    
     
*    6.活动时间查询    
     
 *    7.进行路径导航 

 *  8.模拟时间暂停

 * 9.模拟时间快进
 * 10.活动闹钟提醒 (以模拟时间为准，通过输出"\a"模拟闹铃)
 > 与其他模块交互
 * 1.可以通过课表查询或者课程名称查询创建course实例，完成学生所需要的与课程有关的功能 
 * 2.与活动相关的功能都在本模块内部实现
 * 3.通过路径导航功能可以创建guide实例，实现学生的导航需求

 #### 3.2.2管理员用户
> 数据结构说明和数据字典
* 1.struct single_course_a

一堂课
* 2.whole_course_a

一门课
* 3.single_activity_a

一次活动
> 实现的功能
* 1.班级活动菜单（对班级活动进行增加和删除）

* 2.发布新的课程
* 3.修改原有课程
> 与其他模块交互
* 管理员对文件的修改将会影响到其他用户在之后读取各种数据的情况
#### 3.2.3 教师用户
>数据结构说明和数据字典

>算法

>实现的功能

>与其它模块的交互
------------------------------
## 四、测试报告

---------
## 五、数据结构说明报告
> 5.1 二叉搜索树
* 二叉搜索树在学生模块中，用于查找用户输入的时刻的后继（大于等于该时刻的最小时刻），如果有n个表项，查找时间复杂度度 O(ln n)。
> 5.2模拟时钟结构体(weekly_sys_time)
* 模拟时钟结构体在学生模块中，用于真实时间和实际时间之间的相互转化，可以实现快进、暂停等功能，快进前后都可以精确到分。
通过创建模拟时钟结构体数组T，我们可以用 T[0]  记录登录时刻，T[1] 记录当前时刻，T[2] 记录快进开始时刻，T[3]、T[4] 记录暂停开始和结束时刻。
> 5.3 字符到包含该字符的字符串的map
* map位于学生模块中，包含 x 项，用于模糊查找，map内部使用红黑树，在查找时通过对输入的 k 个字符作为 key,查找对应的value,可以以 O(kln x) 时间复杂度实现模糊查找。
>5.4 哈夫曼树

>5.5 图的存储



----------
## 六、评价和改进意见报告
* 本项目为单机版，难以被实际运用，在本学期计网知识的学习之后，我们可以考虑拓展该项目为CS或者BS架构，达到允许多用户同时线上操作的目的。
* 闹钟的响应进程为了实现声音播放的功能，有较为漫长的执行时间，这导致在登出时主进程不能立即退出，而是要等待一段时间。我们可以进一步考虑改变声音的播放方式，可以在项目中插入音频文件进行播放，这样就不会出现进程周期过长的问题。
*  编码能力有限。
--------
## 七、用户使用说明报告

###  8.1.管理员用户
> 可以大量的进行数据修改，并与文件进行交互，应该注意修改时要严格按照输入格式要求进行输入，否则会使得输入难以识别，或者文件被破坏。其主要操作如下：
* 1.班级活动菜单（对班级活动进行增加和删除）
* 2.发布新的课程
* 3.修改原有课程
### 8.2.教师用户
>  发布作业。
* 教师输入作业的相关描述即可。
>  批改作业。
* 教师通过对某一任教课程的某一次作业进行集中解压，得到目标文件，之后教师可以进入文件系统查看作业，批改完毕后在系统中输入分数即可。
###  8.3.学生用户
>  课内信息管理
* 1.课程名称查询   
* 2.课表课程查询    
* 3.课程时间查询   
* 4.提交课程作业 
* 5.提交课程资料                            
* 6.下载课程资料    
* 7.作业名称查询   
* 8.作业成绩排序    
* 9.资料名称查询   
* 10.资料权重排序
>    课外信息管理    
*   1.活动名称查询       
*   2.进入活动菜单（进入后可以对个人活动增删改)        
*    3.活动时间查询    
>    路径导航   
*    进行路径导航 
>   时钟模拟与闹钟
*  1.模拟时间暂停
*  2.模拟时间快进
*  3.活动闹钟提醒 (以模拟时间为准，通过输出"\a"模拟闹铃)


​     